<!DOCTYPE html>
<html>
   <head>
      <title>
         Welcome to Horror Land
      </title>
	  <link type = "text/css" rel = "stylesheet" href = "project6.css">
      <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

	  <script type="text/javascript">
		var currentLoc = 0;
		var x=0;
		var name;
		var youTook="";
		var locError=1000;
//Name collect
function nameCollect(){
    var person = prompt("Please enter your name", "You");
    if (person != null) {
		name=person;
		}
}
//Location prototype	
function Location(locId, locDesc){
	this.id = locId;
	this.desc = locDesc;}
	//Location objects 
loc0 = new Location (0,"Haunted Mansion: Like a demented Disney castle, the centerpiece entrance of the park is the Haunted Mansion. Modeled after the Winchester Mystery House, it's supposedly filled with weird rooms, dead ends, and strange entertainments. Hopefully, everyone has gone home...Do you look around?\n");
loc1 = new Location (1,"Wicked Waters: A water park. Simple enough. But why is the water so cloudy? And how would anyone survive that drop??\n");
loc2 = new Location (2,"Death by Coaster: Sneaking quietly along the walkway, the monstrous roller coaster comes into view. Already voted 'Most terrifying ride in the world', the ride twists and turns through the night sky like a snake. 'Death by Coaster.' That HAS to be an exaggeration...right?\n");
loc3 = new Location (3,"Circus of Horrors: A large red and white striped, tent-like building. 'Circus of Horrors.' Oh God. This is the LAST place you wanted to be. Coulrophobia is NOT for the faint of heart. Does that say 'Side Show', too??\n");
loc4 = new Location (4,"Creepy Confections: This place doesn't look that bad. Yeah, it says 'Creepy Confections,' but how bad can a few shops & restaurants be?\n");
loc5 = new Location (5,"Insect Infestation: The Insect Infestation attraction is part zoo/part 'hands on experience' that is quote 'intended to education as well as terrify' unquote. You did NOT want to know what they meant by that.\n");
loc6 = new Location (6,"Children's Dreams: A playground. Of sorts. The rides are like traditional kids rides, but....off.\n");
loc7 = new Location (7,"Severed Stadium: It says 'stadium' but it looks more like the Roman Colliseum. How bizarre! Then you remember some of the 'attractions' the Colliseum used to present...\n");
loc8 = new Location (8,"Creatures from the Deep: An insanely large aquarium, this attraction, too, has made headlines. But, honestly, a shark is a shark, right?\n");
loc9 = new Location (9,"Zombie Zoo: Part zoo, part drive-thru safari, all terrifying. Even now you can hear the sounds of animals. Sounds you don't recognize. But Sam LOVED animals, so you have to look here. As you approach the hideous gate, made to look like a way too realistic alligator gone undead, you notice a key card wedged between two of the teeth. For a cement 'gate', those teeth look awfully sharp...\n");
//Location array
var locArr = [
/*0 Mansion*/loc0.desc,
/*1 Waters*/loc1.desc,
/*2 Coaster*/loc2.desc,
/*3 Circus*/loc3.desc,
/*4 Confections*/loc4.desc, 
/*5 Insect*/loc5.desc,
/*6 Children's*/loc6.desc,
/*7 Stadium*/loc7.desc,
/*8 Aquarium*/loc8.desc,
/*9 Zoo*/loc9.desc,
]
var errorMsg = [
/*0*/ "As you head that way, you hit the gate that surrounds the park. You feel SUPER weird the closer you get. Suddenly, you black out. You wake up in a heap right where you entered the park. No one is around, so you keep looking.",
/*1*/ "You see the edge of the park. You don't want to risk what happened last time, so you go to turn. As you turn, "]
//Navigation variables
		var NORTH = 0;
		var SOUTH = 1;	 
		var EAST  = 2;
		var WEST  = 3;
//Navigation locations
		var nav = [ // N,S,E,W,
             /*Current Location*/ 
			 /*0 Entrance*/ [4,1000,2,1],
             /*1 Mansion*/ [3,1000,0,1000],
			 /*2 Coaster*/ [5,1000,1000,0],
			 /*3 Circus*/ [6,1,4,1000],
			 /*4 Concessions*/ [7,0,5,3],
			 /*5 Insect*/ [8,2,1000,4],
			 /*6 Children's*/ [9,3,7,1000],
			 /*7 Stadium*/ [9,4,8,6],
			 /*8 Aquarium*/ [9,5,1000,7],
			 /*9 Zoo*/ [1000,6,1000,1000]
			 ];        
// Directional Button Event Handlers
		function btnEast_click() {nextLoc(EAST);}
		function btnWest_click() {nextLoc(WEST);}
		function btnNorth_click() {nextLoc(NORTH);}
		function btnSouth_click() {nextLoc(SOUTH);}
		function nextLoc(dir) {
			var newLoc = nav[currentLoc][dir];
			currentLoc=newLoc;
			if (currentLoc==1000){
				loseGame();
				buttonDisable();
				}
			else{
			var locText=locArr[newLoc];
			var itemText;
			buttonDisable();
			if (itemDesc[currentLoc]!=0){
				itemText=itemDesc[currentLoc];
				displayMessage(locText+"\n\n"+itemText);
				}
				else{
					displayMessage(locArr[newLoc]);
					moveLocPoints();
					}
					}
					}
//Items Objects
function Item(itemId,itemDesc){
	this.id = itemId;
	this.desc = itemDesc;}
//Individual Items
key = new Item ("the key","As you start to head towards the mouth, um, gate?, of the zoo, you step on something hard. It's a key. The handle is shaped like a femur.\n\n\n");
rope = new Item ("the rope","To the left, a loose length of rope dangles from one of the bleachers.\n\n\n");
card = new Item ("the ID card","You walk by the bushes towards the door. Something glintss in the moonlight. It's an ID card!!!\n\n\n");
notebook = new Item ("Sam's notebook","What's that? You see the corner of something sticking out of the corner near the shark tank. It's a notebook. It's SAM'S notebook!!\n\n\n");
//Location Item Array
var itemDesc = [
/*0 Mansion*/0,
/*1 Waters*/0,
/*2 Coaster*/card.desc,
/*3 Circus*/rope.desc,
/*4 Confections*/0, 
/*5 Insect*/0,
/*6 Children's*/0,
/*7 Stadium*/0,
/*8 Aquarium*/notebook.desc,
/*9 Zoo*/key.desc,
]

var itemArr =[
/*0 Mansion*/0,
/*1 Waters*/0,
/*2 Coaster*/card.id,
/*3 Circus*/rope.id,
/*4 Confections*/0, 
/*5 Insect*/0,
/*6 Children's*/0,
/*7 Stadium*/0,
/*8 Aquarium*/notebook.id,
/*9 Zoo*/key.id,
]
//Bag of Holding
var itemBag=["a backpack","a flashlight"]
function btnInventory(){
	var bagContents = itemBag.toString();
	var bagPrint = "You've brought or found: " + bagContents;
    displayMessage(bagPrint);
}
//take button
function btnTake(){
	var item = itemArr[currentLoc];
	if (item==0){
		youTook="There is nothing to take here. Keep looking."}
		else {
			youTook = "You've pick up the " + item + " and put it in your backpack.";
			itemBag.push(item);
			var itemRemove=itemDesc.splice(currentLoc,1,0);

			//var item=itemArr.splice(currentLoc,1);
			var itemDescReplace=itemDesc.splice(currentLoc,1,0);
			var itemArrReplace=itemArr.splice(currentLoc,1,0);
			displayMessage(youTook);
			};
	countItemPoints();
	winGame();
	}
// Utility Function(s)
		function displayMessage(msg) {
            var target = document.getElementById("taMain");
            target.value = msg + "\n\n" + target.value;
         }
//Win function
		function winGame(){
		if (itemBag.length==6){
		displayMessage("Crap! As you go to put it in the bag, the notebook falls to the ground. You reach down to pick it up. Suddenly, you register what you're reading. In frantically drawn text, it says 'HELP! I'M TRAPPED BEHIND THE WATERFALL!!!' \n\nSomeone - or something? - must have dropped it...after...You don't want to think about what's happened to Sam. You run to the Wicked Waters display and carefully try to get behind the waterfall. \n\nIt's impossible! No, wait, you have an idea. Using the rope, you lower yourself from the top of the waterfall. Behind it, you see a cage. THERE'S SAM!! You unlock the cage and grab Sam, who, semi-conscious, is able to stumble along with your help. \n\nHow to get out of here?? There's a door in the back! Using the ID card, you are able to scan it and open the door. You run to the nearest exit! \n\nOMG YOU MADE IT!!! Once you're clear of the park - AND SAFE!! - you set Sam on the ground.\n\n'SAM!! SAM!! WAKE UP!'\n\n'"+name+"? Is that you?'\n\n'Yeah, are you okay?'\n\n'I'm fantassssttiiiiccc' \n\nSam's voice completely changes...and looks up at you. Staring back  is a hideously disgusting caricature of what was once your best friend. Not Sam. Not human. Not...natural. As the creature lunges, you see a sign in the distance and realize, \n\n'We're still in the park...'")
		}
		}
//Location Scores
var locPoints = [
	/*0 Mansion*/52,
	/*1 Waters*/50,
	/*2 Coaster*/50,
	/*3 Circus*/50,
	/*4 Confections*/50, 
	/*5 Insect*/50,
	/*6 Children's*/50,
	/*7 Stadium*/50,
	/*8 Aquarium*/50,
	/*9 Zoo*/50,
	]
	
//Earned Location Scores
var earnedLocPoints = []
//Point Items
var totalItems;

function countItemPoints(){
totalItems=itemBag.length;
var itemTotal=(totalItems-2)*16;
displayMessage("You've earned "+itemTotal+" points for that item");
countAllPoints();
}
//Earn location points
var totalLocPoints;
var z;
var y;
var q;
var totalGamePoints;

function moveLocPoints(){
y = locPoints.splice(currentLoc,1,0);
earnedLocPoints.push(y);
z=earnedLocPoints.length;
for(var i=0; i < z; i++){
   sum += z;
   return z;
   displayMessage(z);
   }

}
/*
function countLocPoints(){
for(var i=0; i < earnedLocPoints.length; i++){
   sum += parseInt(earnedLocPoints[i]);
   z=sum;
   displayMessage(sum);
}
//countAllPoints();
}
function countAllPoints(){
totalGamePoints = z+totalItemPoints;
displayPoints();
}*/
//Show points
function displayPoints(){
displayMessage(totalGamePoints+" points");
}
//Lose Game function. You can lose the game by either going out of the park or visiting too many sites without collecting all the objects. A player can only go outside the park when they are using text entries to navigate. Ignoring a warning in the navigation error box is punishable by death. :) 
	function loseGame(){
		if (currentLoc=1000||tooLong>=13){
		var deathChoice = Math.floor(Math.random() * 10);
		displayMessage("Wait. What's going on? You suddenly feel SUPER weird and you hear a noise behind you. Just as you feel yourself blacking out, you start to turn and "+loserDeath[deathChoice]);
			}
		}
//Loser Deaths
var loserDeath=[
	/*0 Mansion*/"You wake up in a heap right where you entered the park. No one is around, so you keep looking.",
	/*1 Waters*/"Water",
	/*2 Coaster*/"Coaster",
	/*3 Circus*/"Circus",
	/*4 Confections*/"Confection", 
	/*5 Insect*/"Insect",
	/*6 Children's*/"Children",
	/*7 Stadium*/"Stadium",
	/*8 Aquarium*/"Aquarium",
	/*9 Zoo*/"Animals",
]
//Onload function
	function init(){
	buttonDisable(0);
	nameCollect();
	displayMessage("A new amusement park, Horrorland, has come to your town. The advertisements describe it as a 'gory, terror-filled fright fest'. Everyone you know has received a free, late-night, 'Exclusive Preview' invitation prior to the grand opening. All your friends can't wait!!! Secretly, though, the place SERIOUSLY creeps you out. You find some excuse to not go, and you wind up being pretty much the only one."+"\n\n"+"The next day, people are raving about how scary/fun it is. You HAVE to go they say. However, in the days afterward, your best friend Sam has gone missing. Everyone has a theory, but only YOU KNOW it was that place. It's up to you to investigate, so, tonight, you're going to find Sam.\n\n Click or enter North,East, or West to continue...");
	} 
//Returns an error message if user enters text that is not NSEW
		function wrongDir(){
		document.getElementById("navError").innerHTML = "Oops! Try that again. N, S, E, or W."
		}
//Changes data entered into all lowercase
//Launches appropriate button function based on NSEW text entered
		function btnGo(){
		dir = document.getElementById("box").value;
		dir = dir.toLowerCase();
		document.getElementById("navError").innerHTML = " ";
		switch(dir){
		case "n": 
		case "north": btnNorth_click();
			break;
		case "w":
		case "west": btnWest_click();
			break;
		case "e": 
		case "east": btnEast_click();
			break;
		case "s":
		case "south": btnSouth_click();
			break;
		case "take":
		case "t": btnTake();
			break;
		case "inventory":
		case "i": btnInventory();
			break;
		default: wrongDir();
		}		
		}
//Disables buttons that are not applicable based on current location
		function buttonDisable(){
		switch (currentLoc){
		//South off
		case 0: document.getElementById("btnN").disabled = false;
				document.getElementById("btnS").disabled = true;
				document.getElementById("btnE").disabled = false; 
				document.getElementById("btnW").disabled = false;	
				document.getElementById("navError").innerHTML = "WARNING: You've reached the edge of the park. Don't try to go SOUTH..."
			break;
		//South West off
		case 1: document.getElementById("btnN").disabled = false; 
				document.getElementById("btnS").disabled = true;
				document.getElementById("btnE").disabled = false;
				document.getElementById("btnW").disabled = true;
				document.getElementById("navError").innerHTML = "WARNING: You've reached the edge of the park. Don't try to go SOUTH or WEST..."
			break;
		//South East off
		case 2: document.getElementById("btnN").disabled = false;
				document.getElementById("btnS").disabled = true;
				document.getElementById("btnE").disabled = true;
				document.getElementById("btnW").disabled = false;
				document.getElementById("navError").innerHTML = "WARNING: You've reached the edge of the park. Don't try to go SOUTH or EAST..."				
			break;
		//East off
		case 8:
		case 5: document.getElementById("btnN").disabled = false;
				document.getElementById("btnS").disabled = false;
				document.getElementById("btnE").disabled = true;
				document.getElementById("btnW").disabled = false;
				document.getElementById("navError").innerHTML = "WARNING: You've reached the edge of the park. Don't try to go EAST..."
			break;
		//West off
		case 6:
		case 3: document.getElementById("btnN").disabled = false;
				document.getElementById("btnS").disabled = false;
				document.getElementById("btnE").disabled = false;
				document.getElementById("btnW").disabled = true;
				document.getElementById("navError").innerHTML = "WARNING: You've reached the edge of the park. Don't try to go WEST..."				
			break;
		//East West North off
		case 9: document.getElementById("btnN").disabled = true;
				document.getElementById("btnS").disabled = false;
				document.getElementById("btnE").disabled = true;
				document.getElementById("btnW").disabled = true;
				document.getElementById("navError").innerHTML = "WARNING: You've reached the edge of the park. Don't try to go NORTH, EAST, or WEST..."
			break;
		case 1000: document.getElementById("btnN").disabled = true;
				document.getElementById("btnS").disabled = true;
				document.getElementById("btnE").disabled = true;
				document.getElementById("btnW").disabled = true;
				document.getElementById("btnTake").disabled = true;
				document.getElementById("btnInventory").disabled = true;
				document.getElementById("btnGo").disabled = true;
				break;
		default: document.getElementById("btnN").disabled = false;
				document.getElementById("btnS").disabled = false;
				document.getElementById("btnE").disabled = false;
				document.getElementById("btnW").disabled = false;
				}
}

function helpMe(){
var help = "Click an active direction to move or enter a compass direction into the text box below and click GO. To pick up an item, click the TAKE button or enter Take into the text box below and click GO. Any questions or problems with the game, click the CONTACT link."
displayMessage(help);
}
	</script>
	</head>
   <body onload="init();">
		<!--Display title of game on game page-->
		<h1>Welcome to Horror Land!</h1>


<div>
<div id="score"> 		<!--score display area-->
	<p id="scoreSpot" class="scoreSpot"></p>
</div>					<!--score display area-->
		<textarea id="taMain" rows="15" cols="100"></textarea><br>
		<input type="button" id="btnW" value="West" onclick="btnWest_click();">
		<input type="button" id="btnE" value="East" onclick="btnEast_click();">
		<input type="button" id="btnN" value="North" onclick="btnNorth_click();">
		<input type="button" id="btnS" value="South" onclick="btnSouth_click();">
		<input type="button" id="btnTake" value="Take Item" onclick="btnTake();">
		<input type="button" id="btnInventory" value="Item inventory" onclick="btnInventory();">
		<input type="button" id="test" value="test" onclick="nameCollect();">
<!--navigation text input-->
<input type="text" id="box"> 
<input type="button" id="btnGo" class="button" onclick="btnGo();" value="Go">
<p>Would you like to go N, S, E, or W? Would you like to TAKE that item?</p>
<p id="navError"></p>
<!--navigation text input-->
</div>
<div> 					<!--help display-->
    <input type="button" class = "button" value="Help"  onclick="helpMe();"/>
<!--Put a mailto: link on the game page -->
		<p>For more information, contact me at <a href = "mailto:craychap@gmail.com">craychap@gmail.com</a></p>
</div> 					<!--help display-->
	</body>
</html>